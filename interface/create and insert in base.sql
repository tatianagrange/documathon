-- MySQL Script generated by MySQL Workbench
-- Thu Aug 28 16:26:08 2014
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema documathon
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `documathon` DEFAULT CHARACTER SET utf8 ;
USE `documathon` ;

-- -----------------------------------------------------
-- Table `documathon`.`Author`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Author` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `birth` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

--
-- Contenu de la table `Author`
--

INSERT INTO `Author` (`id`, `name`, `birth`) VALUES
(1, 'Tatiana', NULL),
(2, 'Cloé', NULL),
(4, 'Léo', NULL),
(6, 'Faclab', NULL),
(17, 'Adel', NULL);


-- -----------------------------------------------------
-- Table `documathon`.`Project`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Project` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `lang` VARCHAR(45) NULL DEFAULT NULL,
  `date` DATETIME NOT NULL,
  `start` DATETIME NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

--
-- Contenu de la table `Project`
--

INSERT INTO `Project` (`id`, `name`, `lang`, `date`, `start`) VALUES
(1, 'Enceintes', 'fr', '2014-07-12 18:45:00', '2014-02-12 00:00:00'),
(2, 'Mandala', 'fr', '2014-06-10 14:07:00', '2014-02-12 00:00:00');


-- -----------------------------------------------------
-- Table `documathon`.`Step`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Step` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `path` TEXT NOT NULL,
  `text` TEXT NULL DEFAULT NULL,
  `projectId` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Image_Project1_idx` (`projectId` ASC),
  CONSTRAINT `fk_Image_Project1`
    FOREIGN KEY (`projectId`)
    REFERENCES `documathon`.`Project` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

--
-- Contenu de la table `Step`
--

INSERT INTO `Step` (`id`, `path`, `text`, `projectId`) VALUES
(1, 'http://www.sono-energie.com/Files/29805/Img/03/enceintes-home-cinema-beng-V9B-CS-BK-1.jpg', 'Un premier super essai pour mes enceintes! Qu''elles sont belle! Bla bla bla!', 1),
(2, 'http://www.reparation-haut-parleur.com/images/enceintes-acoustiques.jpg', 'J''ai complètement revisité le projet. Ca ressemble à ça maintenant', 1),
(3, 'http://media.ldlc.com/ld/products/00/01/11/83/LD0001118333_1.jpg', 'On y arrive! Le projet est terminé! Voilà ce que ça donne, au final. J''ai fait comme-ci comme-ça. Hahaha!', 1),
(5, 'http://soutien67.free.fr/varies/mandala/mandala_17.jpg', 'Une super idée de mandala à la découpeuse vinyle. Je suis partie sur ce modèle. Il a l''air cool.', 2),
(6, 'http://rickylasouris.pagesperso-orange.fr/mandalas/mandaani/original/Animo04.jpg', 'Ensuite j''ai vectorisé le tout et exporté le fichier en dxf. Sur studio, j''ai lancé la découpe. Un petit coup à la presser. Et voilà ce que ça donne.', 2);


-- -----------------------------------------------------
-- Table `documathon`.`Material`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Material` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(125) NOT NULL,
  `width` INT NULL DEFAULT NULL,
  `length` INT NULL DEFAULT NULL,
  `thickness` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

--
-- Contenu de la table `Material`
--

INSERT INTO `Material` (`id`, `name`, `width`, `length`, `thickness`) VALUES
(1, 'Plexi Blanc', NULL, NULL, 3),
(2, 'Contre plaqué', NULL, NULL, NULL),
(3, 'PLA Bleu Ultimaker - ColorFab', NULL, NULL, NULL),
(4, 'Flex rouge', NULL, NULL, NULL);


-- -----------------------------------------------------
-- Table `documathon`.`Tool`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Tool` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(125) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

--
-- Contenu de la table `Tool`
--

INSERT INTO `Tool` (`id`, `name`) VALUES
(1, 'Découpe laser'),
(2, 'Découpeuse Vinyle Cameo'),
(3, 'Scie à bois'),
(4, 'Fraiseuse'),
(5, 'Ponceuse'),
(6, 'Imprimante 3D');


-- -----------------------------------------------------
-- Table `documathon`.`Material_has_Project`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Material_has_Project` (
  `materialId` INT NOT NULL,
  `projectId` INT NOT NULL,
  PRIMARY KEY (`materialId`, `projectId`),
  INDEX `fk_Material_has_Project_Project1_idx` (`projectId` ASC),
  INDEX `fk_Material_has_Project_Material1_idx` (`materialId` ASC),
  CONSTRAINT `fk_Material_has_Project_Material1`
    FOREIGN KEY (`materialId`)
    REFERENCES `documathon`.`Material` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Material_has_Project_Project1`
    FOREIGN KEY (`projectId`)
    REFERENCES `documathon`.`Project` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

--
-- Contenu de la table `Material_has_Project`
--

INSERT INTO `Material_has_Project` (`materialId`, `projectId`) VALUES
(1, 1),
(2, 1),
(4, 2);


-- -----------------------------------------------------
-- Table `documathon`.`Tool_has_Project`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Tool_has_Project` (
  `toolId` INT NOT NULL,
  `projectId` INT NOT NULL,
  PRIMARY KEY (`toolId`, `projectId`),
  INDEX `fk_Tool_has_Project_Project1_idx` (`projectId` ASC),
  INDEX `fk_Tool_has_Project_Tool1_idx` (`toolId` ASC),
  CONSTRAINT `fk_Tool_has_Project_Tool1`
    FOREIGN KEY (`toolId`)
    REFERENCES `documathon`.`Tool` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Tool_has_Project_Project1`
    FOREIGN KEY (`projectId`)
    REFERENCES `documathon`.`Project` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

--
-- Contenu de la table `Tool_has_Project`
--

INSERT INTO `Tool_has_Project` (`toolId`, `projectId`) VALUES
(4, 1),
(5, 1),
(2, 2);


-- -----------------------------------------------------
-- Table `documathon`.`Step_has_Author`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `documathon`.`Step_has_Author` (
  `stepId` INT NOT NULL,
  `authorId` INT NOT NULL,
  PRIMARY KEY (`stepId`, `authorId`),
  INDEX `fk_Step_has_Author_Author1_idx` (`authorId` ASC),
  INDEX `fk_Step_has_Author_Step1_idx` (`stepId` ASC),
  CONSTRAINT `fk_Step_has_Author_Step1`
    FOREIGN KEY (`stepId`)
    REFERENCES `documathon`.`Step` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Step_has_Author_Author1`
    FOREIGN KEY (`authorId`)
    REFERENCES `documathon`.`Author` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

--
-- Contenu de la table `Step_has_Author`
--

INSERT INTO `Step_has_Author` (`stepId`, `authorId`) VALUES
(5, 2),
(6, 4),
(6, 6),
(1, 17),
(2, 17),
(3, 17);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
